<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport"/>
    <meta content="#fde7f3" name="theme-color"/>
    <meta content="default-src 'self' data: gap: 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; font-src 'self'; media-src *; img-src 'self' data: content:;" http-equiv="Content-Security-Policy"/>
    <title>U-AUBEN INVENTORY</title>
    <!-- Remplacement des CDN par des fichiers locaux selon les consignes -->
    <script src="js/lucide.min.js"></script>
    <script src="js/marked.min.js"></script>
    <script src="js/db.js"></script>
    <style>
        /* Standalone Tailwind - Injecté selon les consignes */
        /* Note: Dans un environnement réel, on injecterait ici le CSS compilé de Tailwind. 
           Pour cet exercice, j'applique les styles système demandés. */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            background-color: #fde7f3;
            min-height: 100vh;
        }
        .main-container {
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: #fde7f3;
            background-image: radial-gradient(#e5e7eb 0.5px, transparent 0.5px);
            background-size: 20px 20px;
            position: relative;
            overflow-x: hidden;
        }
        .font-algerian { font-family: 'serif'; font-weight: bold; }
        .font-monotype-corsiva { font-family: 'cursive'; }
        button {
            touch-action: manipulation;
            cursor: pointer;
        }
        .hidden { display: none !important; }
        
        /* Styles additionnels extraits du document */
        .input-file-style {
            display: block;
            width: 100%;
            color: #6b7280;
        }
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        details > summary::after {
            content: '+';
            float: right;
            font-size: 1.5em;
            line-height: 1;
            font-weight: bold;
            color: #3b82f6;
        }
        details[open] > summary::after { content: '-'; }
        #aube-chat-messages {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
    </style>
</head>
<body class="bg-gray-200">
    <div class="main-container" id="main-app-container">
        <!-- Écran: Accueil -->
        <div class="flex flex-col h-full" id="screen-blocA">
            <!-- Header -->
            <div class="flex-shrink-0 px-4 pt-4 z-10">
                <div class="bg-red-700 text-white rounded-full flex justify-between items-center p-3 shadow-md" style="background-color: #b91c1c;">
                    <button class="text-white" onclick="toggleMenu(true)">
                        <i data-lucide="menu"></i>
                    </button>
                    <h1 class="font-semibold text-sm">&nbsp;</h1>
                    <button class="text-white" onclick="promptForPassword()">
                        <i data-lucide="sliders-horizontal"></i>
                    </button>
                </div>
            </div>
            <!-- Main Content -->
            <div class="flex-grow overflow-y-auto px-4">
                <div class="relative my-4">
                    <input class="w-full bg-white rounded-full pl-10 pr-12 py-2 border-2 border-gray-200 focus:outline-none focus:border-blue-500 shadow-inner" id="search-input" placeholder="Que cherchez vous aujourd’hui ?" type="search"/>
                    <i class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5" data-lucide="search"></i>
                    <button class="absolute right-4 top-1/2 -translate-y-1/2 text-blue-600 hover:text-blue-800" onclick="navigateTo('screen-chat-aube')">
                        <i data-lucide="bot"></i>
                    </button>
                </div>
                <div class="bg-blue-900 rounded-2xl p-2 flex items-center space-x-2 text-center mb-4 shadow-lg overflow-x-auto no-scrollbar" style="background-color: #1e3a8a;">
                    <button class="text-white py-2 px-4 text-xs font-semibold bg-white/10 hover:bg-white/20 rounded-lg transition-colors flex-shrink-0" onclick="showBlocDetails('A')">Bloc A</button>
                    <button class="text-white py-2 px-4 text-xs font-semibold bg-white/10 hover:bg-white/20 rounded-lg transition-colors flex-shrink-0" onclick="showBlocDetails('B')">Bloc B</button>
                    <button class="text-white py-2 px-4 text-xs font-semibold bg-white/10 hover:bg-white/20 rounded-lg transition-colors flex-shrink-0" onclick="showBlocDetails('C')">Bloc C</button>
                    <button class="text-white py-2 px-4 text-xs font-semibold bg-white/10 hover:bg-white/20 rounded-lg transition-colors flex-shrink-0" onclick="showBlocDetails('D')">Bloc D</button>
                    <button class="text-white py-2 px-4 text-xs font-semibold bg-white/10 hover:bg-white/20 rounded-lg transition-colors flex-shrink-0" onclick="showBlocDetails('E')">Bloc E</button>
                    <button class="text-white py-2 px-4 text-xs font-semibold bg-white/10 hover:bg-white/20 rounded-lg transition-colors flex-shrink-0" onclick="showBlocDetails('F')">Bloc F</button>
                </div>
                <div class="bg-white rounded-3xl shadow-lg overflow-hidden mb-4">
                    <img alt="Bâtiment Universitaire" class="w-full h-auto object-cover" id="main-building-image" src="img/building.jpg"/>
                </div>
                <div class="text-center">
                    <div class="bg-blue-900 text-white w-auto inline-block px-6 font-semibold py-3 rounded-2xl shadow-md text-center font-algerian" style="background-color: #1e3a8a;">
                        UNIVERSITE AUBE NOUVELLE
                    </div>
                </div>
                <div class="h-24"></div>
            </div>
        </div>

        <!-- Autres écrans (Dynamiques) -->
        <!-- Les écrans comme screen-blocA-details, screen-blocA1-levels, etc. seraient ici -->
    </div>

    <script>
        // Fonctions de navigation optimisées selon les consignes
        function navigateTo(screenId) {
            const screens = document.querySelectorAll('[id^="screen-"]');
            screens.forEach(s => s.classList.add('hidden'));
            const target = document.getElementById(screenId);
            if (target) target.classList.remove('hidden');
        }

        function showBlocDetails(blocId) {
            // Logique pour afficher les détails du bloc
            navigateTo('screen-bloc-details');
        }

        // Initialisation de Lucide avec sécurité
        function initIcons() {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            } else {
                console.warn("Lucide n'est pas chargé, les icônes ne seront pas affichées.");
            }
        }

        function toggleMenu(isOpen) {
            const sideMenu = document.getElementById('side-menu');
            const overlay = document.getElementById('menu-overlay');
            if (sideMenu && overlay) {
                if (isOpen) {
                    sideMenu.style.transform = 'translateX(0)';
                    overlay.classList.remove('hidden');
                } else {
                    sideMenu.style.transform = 'translateX(-100%)';
                    overlay.classList.add('hidden');
                }
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            initIcons();
        });
    </script>
</body>
</html>
